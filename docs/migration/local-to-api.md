# 本地数据导入云端（API 模式）

## 背景

早期版本的前端以浏览器 `localStorage` 作为主要持久化；生产级版本默认以 **API 模式** 运行：项目与分镜写入 Postgres，并通过鉴权与 Team 隔离数据。

为减少升级成本，Web 在检测到旧的本地项目数据时，提供“一键导入到云端”入口。

## 触发条件

- Web 运行在 **API 模式**（默认：开发/生产）
- 用户已登录（有有效 Access Token）
- 浏览器中存在本地项目数据，并且服务端未存在同 ID 的项目

## 导入范围

- **会导入**
  - 项目（Project）
  - 分镜（Scene）
  - 工作流进度字段（`workflowState` / `currentSceneOrder` / `currentSceneStep`，最佳努力）

- **不会导入（仍为本地数据）**
  - 角色（Character）
  - 世界观（WorldView）
  - 其它仅本地使用的配置/缓存

## 使用方式

1. 登录后进入“项目列表”
2. 若检测到可导入的数据，会出现提示条
3. 点击“导入到云端”，等待导入完成提示

## 注意事项

- 导入过程是 **最佳努力**：单个项目/分镜导入失败不会阻断其它条目导入
- 导入成功后会刷新项目列表；本地数据不会自动删除（避免误删）


